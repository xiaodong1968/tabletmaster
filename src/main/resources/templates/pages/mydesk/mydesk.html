<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name=renderer content=webkit>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--[if lt IE 9]>
    <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <meta charset="UTF-8">
    <link th:href="@{/third/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/third/layui/css/layui.css}" rel="stylesheet">
    <link th:href="@{/third/css/public/iconfont/iconfont.css}" rel="stylesheet">
    <link th:href="@{/third/css/mydesk.css}" rel="stylesheet">
    <title>我的桌面</title>
</head>
<body>
<div class="layui-fluid">
    <div class="layui-row layui-col-space15" style="margin-top: 20px;">
        <div class="layui-col-lg9 layui-col-md9 layui-col-sm9 layui-col-xs9" style="">
            <div class="title">班牌监控</div>
            <div class="layui-row layui-col-space15">
                <input type="hidden" id="onLine" th:value="${onLine}">
                <input type="hidden" id="offLine" th:value="${offLine}">
                <div th:each="device:${devices}" class="layui-col-lg3 layui-col-md3 layui-col-sm3 layui-col-xs3">
                    <div class="card">
                        <h2><span th:text="${device.name}"></span><i class="layui-icon layui-icon-star"></i></h2>
                        <div class="ipAddress">
                            <p th:text="${device.ipAddress}"></p>
                            <div class="network">
                                <i th:if="${device.statu==2}" class="layui-icon layui-icon-wifi" style="color: red;"></i>
                                <i th:if="${device.statu==1}" class="layui-icon layui-icon-wifi"></i>
                            </div></div>
                    </div>
                </div>

            </div>

        </div>
        <div class="layui-col-lg3 layui-col-md3 layui-col-sm3 layui-col-xs3" style="">
            <div class="title">
                班牌状态统计
            </div>
            <div style="border: 1px solid #93afb9;border-radius: 10px;margin-top: 30px;">
                <div id="container" style="height: 400px;"></div>
            </div>
        </div>
    </div>
</div>




<!--<div class="container">-->
<!--    <button onclick="sendOff()">关机</button>-->
<!--</div>-->
<script th:src="@{/third/js/jquery.min.js}" type="text/javascript"></script>
<script th:src="@{/third/layui/layui.js}" type="text/javascript"></script>
<script th:src="@{/third/js/echarts.min.js}" type="text/javascript"></script>
<script>

    var onLIne = $("#onLine").val();
    var offLine = $("#offLine").val();

    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};

    var option;

    option = {
        title: { //标题设置
            text: '班牌状态饼状图',
            subtext: '2023年6月15日',
            left: 'center',
            top:'20',
        },
        tooltip: {
            trigger: 'item'
        },
        legend: { //图例设置
            orient: 'vertical',
            left: 'center',
            bottom: '20',
            width:'400',
            height:'10'
        },
        color:[
            // '#C1EBDD',
            // '#FF9393',
            '#507eb0',
            '#f15734',
        ],
        series: [
            {
                name: '班牌',
                type: 'pie',
                radius: '50%',
                data: [
                    { value: onLIne, name: '在线班牌' },
                    { value: offLine, name: '离线班牌' },
                ],
                emphasis: {//高亮
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)',
                    }
                }
            }
        ]
    };

    if (option && typeof option === 'object') {
        myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);

</script>
</body>
</html>