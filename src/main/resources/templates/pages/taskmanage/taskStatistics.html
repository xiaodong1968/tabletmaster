<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name=renderer  content=webkit>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--[if lt IE 9]>
    <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <meta charset="UTF-8">
    <link th:href="@{/third/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/third/font-awesome-4.7.0/css/font-awesome.css}" rel="stylesheet">
    <link th:href="@{/third/css/animate.css}" rel="stylesheet">
    <link th:href="@{/third/DataTables/datatables.min.css}" rel="stylesheet">
    <link th:href="@{/third/lib/layui/css/layui.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/third/jtree/css/style.min.css}" rel="stylesheet" type="text/css"></link>
    <link th:href="@{/third/jtree/css/style.css}" rel="stylesheet" type="text/css"></link>
    <link th:href="@{/third/jtree/css/custom.css}" rel="stylesheet" type="text/css"></link>
    <link th:href="@{/third/jtree/css/awesome-bootstrap-checkbox.css}" rel="stylesheet" type="text/css"></link>
    <link th:href="@{/third/css/bootstrap_modify.css}" rel="stylesheet" type="text/css"></link>
    <title>任务统计</title>
    <style>
        #taskTable{
            text-align: center;

        }
        #taskTable thead{
            background: #427442;
            color: white;
        }
        .userName_td{
            font-weight: bold;
            color: black;
        }
        body{
            background: white;
            overflow: scroll;
        }
    </style>
</head>
<body>
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row" >
        <div class="col-sm-12">
                    <input type="hidden" th:value="${menuId}" id="menuId">
                    <div  class="layui-card-header" style="border: none">
                        <label>用户名：</label><input style="height:30px;margin-right: 8px" type="text" id="userName"><button style="height:30px;" class="btn-sm btn-success" onclick="searchUser()">搜索</button>
                        &nbsp;<label  style="color: red;font-weight: bold"><i class="fa fa-close"></i>:未提交</label>
                        &nbsp;<label style="color: royalblue;font-weight: bold"><i class="fa fa-check-square-o"></i>:已提交</label>
                        &nbsp;<label style="color: #56850e;font-weight: bold"><i class="fa fa-minus-square-o"></i>:部分提交</label>
                    </div>
                    <div class="hr-line-dashed" style="margin: 8px 0"></div>
                    <table id="taskTable"
                           class="table table-hover">
                        <thead>
                        <tr>
                            <td th:each="name:${tasks.names}" th:text="${name}" ></td>
                        </tr>
                        </thead>
                        <tbody>
                            <tr th:each="task:${tasks.its}">
                                <td th:text="${task.userName}" class="userName_td"></td>
                                <td th:each="item:${task.itmes}"  th:if="${item.statu}==0" style="color: red;font-weight: bold">
                                     <i class="fa fa-close"></i>
                                </td>
                                <td th:each="item:${task.itmes}"  th:if="${item.statu}==1" style="color: royalblue;font-weight: bold">
                                    <i class="fa fa-check-square-o"></i>
                                </td>
                                <td th:each="item:${task.itmes}"  th:if="${item.statu}==2" style="color: #56850e;font-weight: bold">
                                    <i class="fa fa-minus-square-o"></i>
                                </td>
                            </tr>
                        </tbody>
                    </table>
    </div>
</div>
<!-- 公共尾部开始 -->
<script th:src="@{/third/js/jquery.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/jquery.metisMenu.js}" type="text/javascript"></script>
<script th:src="@{/third/js/hAdmin.js}" type="text/javascript"></script>
<script th:src="@{/third/lib/layui/layui.all.js}" type="text/javascript"></script>
<script th:src="@{/third/js/jquery.validate.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/message_zh.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/validate_default.js}" type="text/javascript"></script>
<script th:src="@{/third/DataTables/datatables.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/jquery.slimscroll.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/global.js}" type="text/javascript"></script>
<script th:src="@{/third/js/sock.js}" type="text/javascript"></script>
<script th:src="@{/third/js/jquery.cookie.js}" type="text/javascript"></script>
<script th:src="@{/third/js/stomp.js}" type="text/javascript"></script>
<!-- 公共尾部结束 -->
<script>
    function searchUser() {
       var username= $("#userName").val();
       console.info(username);
        if(username==""){
            $(".userName_td").each(function(){
                $(this).parent().show();
            });
        }else{
            $(".userName_td").each(function(){
                $(this).parent().show();
            });
            let str=['',...username,''].join('.*');
            let test = new RegExp(str)
            console.info(test);
            $(".userName_td").each(function(){
                if(!test.test($(this).text())){
                    $(this).parent().hide();
                }
            });
        }
    }
</script>
</body>
</html>