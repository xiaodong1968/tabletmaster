<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name=renderer content=webkit>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--[if lt IE 9]>
    <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <meta charset="UTF-8">
    <link th:href="@{/third/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/third/font-awesome-4.7.0/css/font-awesome.css}" rel="stylesheet">
    <link th:href="@{/third/css/animate.css}" rel="stylesheet">
    <link th:href="@{/third/DataTables/datatables.min.css}" rel="stylesheet">
    <link th:href="@{/third/lib/layui/css/layui.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/third/jtree/css/style.min.css}" rel="stylesheet" type="text/css"></link>
    <link th:href="@{/third/jtree/css/custom.css}" rel="stylesheet" type="text/css"></link>
    <link th:href="@{/third/jtree/css/awesome-bootstrap-checkbox.css}" rel="stylesheet" type="text/css"></link>
    <link th:href="@{/third/css/bootstrap_modify.css}" rel="stylesheet" type="text/css"></link>
    <title>编辑用户</title>
    <style>
        body {
            background: white;
        }


    </style>
</head>
<body>
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content">
                    <form method="post" class="form-horizontal" id=editClazzForm>
                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">班级名称：</label>
                            <div class="col-sm-7">
                                <input type="hidden" id="clazzId" th:value="${clazz.id}" name="id">
                                <input  autocomplete="off" required placeholder="请按照一（1）班这样的书写格式,中间无空格,（）为中文输入模式下" type="text" class="form-control" name="clazzName" maxlength="5" id="clazz"
                                       th:value="${clazz.clazzName}" >
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">口号：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="slogan" type="text" th:value="${clazz.slogan}"  class="form-control search"  maxlength="20"
                                       id="slogan" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">班主任：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="clazzTeacher" type="text" th:value="${clazz.clazzTeacher}"  class="form-control search"  maxlength="5"
                                       id="clazzTeacher" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">任课：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="subject" type="text" th:value="${clazz.subject}"  class="form-control search"  maxlength="5"
                                       id="subject" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">职称：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="jobTitle" type="text" th:value="${clazz.jobTitle}"  class="form-control search"  maxlength="5"
                                       id="jobTitle" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">联系方式：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="tel" type="tel" th:value="${clazz.tel}"  class="form-control search"  maxlength="11"
                                       id="tel" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">语文教师：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="chinese" type="text" th:value="${clazz.chinese}"  class="form-control search"  maxlength="5"
                                       id="chinese" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">数学教师：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="mathematics" type="text" th:value="${clazz.mathematics}"  class="form-control search"  maxlength="5"
                                       id="mathematics" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">英语教师：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="english" type="text" th:value="${clazz.english}"  class="form-control search"  maxlength="5"
                                       id="english" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">思想品德教师：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="moral" type="text" th:value="${clazz.moral}"  class="form-control search"  maxlength="5"
                                       id="moral" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">美术教师：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="fineArts" type="text" th:value="${clazz.fineArts}"  class="form-control search"  maxlength="5"
                                       id="fineArts" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">体育教师：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="sports" type="text" th:value="${clazz.sports}"  class="form-control search"  maxlength="5"
                                       id="sports" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">科学教师：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="science" type="text" th:value="${clazz.science}"  class="form-control search"  maxlength="5"
                                       id="science" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">信息技术教师：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="it" type="text" th:value="${clazz.it}"  class="form-control search"  maxlength="5"
                                       id="it" required>
                            </div>
                        </div>

                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">音乐教师：</label>
                            <div class="col-sm-7 allUser">
                                <input autocomplete="off" name="music" type="text" th:value="${clazz.music}"  class="form-control search"  maxlength="5"
                                       id="music" required>
                            </div>
                        </div>


                        <div class="hr-line-dashed"></div>
                        <div class="form-group">
                            <div class="col-sm-9 text-right">
                                <button type="submit" class="btn btn-info" id="saveClazz">保存班级</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 公共尾部开始 -->
<!-- 公共尾部开始 -->
<script th:src="@{/third/js/jquery.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/jquery.metisMenu.js}" type="text/javascript"></script>
<script th:src="@{/third/js/hAdmin.js}" type="text/javascript"></script>
<script th:src="@{/third/lib/layui/layui.all.js}" type="text/javascript"></script>
<script th:src="@{/third/js/jquery.validate.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/message_zh.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/validate_default.js}" type="text/javascript"></script>
<script th:src="@{/third/DataTables/datatables.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/jquery.slimscroll.min.js}" type="text/javascript"></script>
<script th:src="@{/third/js/global.js}" type="text/javascript"></script>
<script th:src="@{/third/js/sock.js}" type="text/javascript"></script>
<script th:src="@{/third/js/jquery.cookie.js}" type="text/javascript"></script>
<script th:src="@{/third/js/stomp.js}" type="text/javascript"></script>
<script th:src="@{/third/jtree/js/jstree.min.js}" type="text/javascript"></script>
<!-- 公共尾部结束 -->
<script>

        var result = $("#editClazzForm").validate({
            // rules: {
            //     username: {
            //         required: true,
            //         stringCheck: true,
            //         maxlength: 15,
            //         minlength: 2
            //     },
            //     realname: {
            //         required: true,
            //         stringCheck: true,
            //         maxlength: 15,
            //         minlength: 2
            //     }
            // }
        });
        $("#editClazzForm").on("submit", function (event) {
            var clazz = document.getElementById("clazz").value;
            var singClazz = /[\u4e00-\u9fa5]\（[0-9]\）班/;
            if (!singClazz.test(clazz)) {
                layer.msg('班级格式填写错误！！！')
                return false;
            }
            var sing = $('#clazzTeacher').attr('text');
            if (sing==-1){
                layer.msg('请选择班主任')
                return false;
            }
            if (result.form()) {
                saveClazz();
            } else {
                layer.msg("表单中有错误！");
            }
            return false;
        });


    function saveClazz() {
        $.ajax({
            url: 'editClazz',
            type: 'post',
            data: $("#editClazzForm").serialize(),
            traditional: true,
            success: function (data) {
                if (data == -1) {
                    layer.msg("该班级已存在");
                    return;
                }
                layer.msg("修改成功", {
                        icon: 1,
                        time: 2000
                    },
                    function () {
                        var index = parent.layer.getFrameIndex(window.name);
                        parent.layer.close(index);
                    });
            }
        });
    }
</script>
</body>
</html>